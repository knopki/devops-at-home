function source_if_possible() {
	if [[ -r $1 ]]; then
		source $1
	fi
}

source "{{ lookup('env','HOME') }}/.zprofile"

# set zsh dirs
ZDOTDIR={{ ZDOTDIR }}
ZDATADIR={{ ZDATADIR }}
ZCACHEDIR={{ ZCACHEDIR }}
ZPLUGINSDIR="${ZDATADIR}/plugins"

# autoload functions
fpath=( $ZDOTDIR/functions "${fpath[@]}" )
for f in `ls $ZDOTDIR/functions`; do
  autoload -Uz $f
done

# enable 256 colors
source_if_possible "${ZPLUGINSDIR}/zsh-256color/zsh-256color.plugin.zsh"

# theme
SPACESHIP_HG_SHOW=false
SPACESHIP_HG_BRANCH_SHOW=false
SPACESHIP_HG_STATUS_SHOW=false
SPACESHIP_RUBY_SHOW=false
SPACESHIP_ELM_SHOW=false
SPACESHIP_ELIXIR_SHOW=false
SPACESHIP_XCODE_SHOW_LOCAL=false
SPACESHIP_XCODE_SHOW_GLOBAL=false
SPACESHIP_SWIFT_SHOW_LOCAL=false
SPACESHIP_SWIFT_SHOW_GLOBAL=false
SPACESHIP_PHP_SHOW=false
SPACESHIP_HASKELL_SHOW=false
SPACESHIP_JULIA_SHOW=false
SPACESHIP_AWS_SHOW=false
SPACESHIP_CONDA_SHOW=false
SPACESHIP_DOTNET_SHOW=false
SPACESHIP_BATTERY_SHOW=false
SPACESHIP_EXIT_CODE_SHOW=true
source_if_possible "${ZPLUGINSDIR}/spaceship-prompt/spaceship.zsh"

# Automopletion stuff
source_if_possible "${ZDOTDIR}/completion.zsh"

# History stuff
source_if_possible "${ZDOTDIR}/history.zsh"

# Set title
source_if_possible "${ZDOTDIR}/title.zsh"

# Aliases
source_if_possible "${ZDOTDIR}/aliases.zsh"

# FZF
source_if_possible "${ZDOTDIR}/fzf.zsh"

# fast-syntax-highlighting
source_if_possible "${ZPLUGINSDIR}/fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh"

# Key bindings
source_if_possible "${ZDOTDIR}/key-bindings.zsh"

# zsh-history-substring-search
source_if_possible "${ZPLUGINSDIR}/zsh-history-substring-search/zsh-history-substring-search.zsh"

# zsh-autosuggestions
ZSH_AUTOSUGGEST_USE_ASYNC="true"
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=10'
source_if_possible "${ZPLUGINSDIR}/zsh-autosuggestions/zsh-autosuggestions.zsh"

# don't beep on error
setopt no_beep

# Changing/making/removing directory
setopt auto_pushd
setopt pushd_ignore_dups
setopt pushdminus

# jobs
setopt long_list_jobs

# recognize comments
setopt interactivecomments

# Nice ls colors
eval "$(dircolors "$XDG_CONFIG_HOME"/dircolors)"
